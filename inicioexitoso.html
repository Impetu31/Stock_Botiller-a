<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Inicio de Sesión Exitoso - Botillería Patito Mar</title>
    <link rel="stylesheet" href="css/style.css" />
    <!-- CSS Boostrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!--alert complement bootstrap -->
    <div class="alert alert-warning alert-dismissible fade show" role="alert">
      <strong>¡Atención!</strong> No bebas y manejes. La seguridad vial es
      responsabilidad de todos.
      <button
        type="button"
        class="close"
        data-dismiss="alert"
        aria-label="Close"
      >
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
    <nav>
      <div class="container">
        <div id="user-info" class="user-info"></div>
        <!-- Aquí se mostrará el nombre de usuario -->
        <button
          id="logout-button"
          class="btn logout-button"
          style="display: none"
        >
          Cerrar sesión
        </button>
      </div>
    </nav>
    <div class="container">
      <div class="title-container">
        <h1 class="text-success">Bienvenido a Botillería Pato Mar</h1>
      </div>
      <h2>¡Inicio de Sesión Exitoso!</h2>
      <p>¡Listo!</p>
      <div class="button-container">
        <a href="stock.html" class="button">Ver Stock y Reservar</a>
      </div>
    </div>
    <!--JS Bootstrap -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <script>
      // Comprobar si hay una sesión activa al cargar la página
      var userInfoElement = document.getElementById("user-info");
      var user = JSON.parse(localStorage.getItem("user")); // Obtener la información del usuario de localStorage

      if (user) {
        // Si hay un usuario almacenado en la sesión, mostrar su nombre de usuario
        userInfoElement.textContent = "¡Bienvenido, " + user.username + "!";
        $("#logout-button").show(); // Mostrar el botón de cierre de sesión
      } else {
        // Si no hay un usuario almacenado, mostrar un mensaje de invitación para iniciar sesión
        userInfoElement.innerHTML =
          '<a href="index.html">Iniciar sesión</a> | <a href="registro.html">Registrarse</a>';
      }

      // Manejar el clic en el botón de cierre de sesión
      $("#logout-button").click(function () {
        // Eliminar el usuario de localStorage
        localStorage.removeItem("user");
        // Redireccionar a la página de inicio de sesión u otra página si es necesario
        window.location.href = "index.html";
      });
    </script>
  </body>
</html>
